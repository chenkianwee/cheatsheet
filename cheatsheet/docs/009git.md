# Git
- https://www.atlassian.com/git/tutorials/comparing-workflows
- https://ohshitgit.com/
- https://github.com/git-guides/git-add
- https://www.freecodecamp.org/news/introduction-to-git-and-github/

git clone 
```
git clone https://git_url.com
```

git log to look at the previous commit
```
git log
```

git add - stage all the changes of the project
```
git add .
```

git commit - commit all the stages 
```
git commit -m "the commit message"
```

git push - you will need to generate a personal access token if you are using github
```
git push --all

git push -u origin main
```

look at all the branches locally, the branch with * is your current branch
```
git branch
```

switch to a branch
```
git switch branch-name
```

create a branch
```
git branch branch-name
```

delete a branch
```
git branch -d branch-name

git branch -d branch-name #forcefully delete a branch
```

delete a branch remotely
```
git push origin --delete branch-name 
```

## reset a commit
use log to check all the commit
```
git log
```

use the following to reset to previous commit locally
```
git reset --soft commit-hash

git reset --hard commit-hash
```

## create a gh-pages branch

1. create a gh-pages branch
```
git branch gh-pages
```

2. remove all the git files to make sure only the build files will be in the gh-pages branch
```
git rm -rf .
```

3. copy all the files from the your jupyter-book folder into this branch. Or if you have set it to be ignore on the main branch, do not ignore it here
```
cp -r jupyter_book_folder .
``` 

4. add all the files to the commit. Make sure to add the .gitignore file to ignore files you are not committing.
```
git add .

git commit -m "message for your commit"
```

5. add the deploy jupyter-book workflow into the folder .github/workflows/deploy_book.yml
```
name: deploy-book

# Run this when the master or main branch changes
on:
  push:
    branches:
    - gh-pages
    # If your git repository has the Jupyter Book within some-subfolder next to
    # unrelated files, you can make this run only if a file within that specific
    # folder has been modified.
    #
    # paths:
    # - user_manual/**

# This job installs dependencies, builds the book, and pushes it to `gh-pages`
jobs:
  deploy-book:
    runs-on: ubuntu-latest
    permissions:
      pages: write
      id-token: write
    steps:
    - uses: actions/checkout@v4

    # Install dependencies
    - name: Set up Python 3.12
      uses: actions/setup-python@v5
      with:
        python-version: '3.12'
        cache: pip # Implicitly uses requirements.txt for cache key

    - name: Install dependencies
      run: pip install -r user_manual/requirements.txt

    # (optional) Cache your executed notebooks between runs
    # if you have config:
    # execute:
    #   execute_notebooks: cache
    - name: cache executed notebooks
      uses: actions/cache@v4
      with:
        path: _build/.jupyter_cache
        key: jupyter-book-cache-${{ hashFiles('user_manual/requirements.txt') }}

    # Build the book
    - name: Build the book
      run: |
        jupyter-book build user_manual/

    # Upload the book's HTML as an artifact
    - name: Upload artifact
      uses: actions/upload-pages-artifact@v3
      with:
        path: "user_manual/_build/html"

    # Deploy the book's HTML to GitHub Pages
    - name: Deploy to GitHub Pages
      id: deployment
      uses: actions/deploy-pages@v4
```

6. push the branch to the remote branch
```
git push -u origin gh-pages
```

6. configure the gh-pages setting to deploy from workflow 


## Git sync branch with main
- how to git sync branch with main: https://graphite.dev/guides/how-to-sync-git-branch-with-main

1. fetch the latest change
```
git fetch origin
```

2. checkout the branch
```
git checkout your-feature-branch
```

3. rebase feature branch to main
```
git rebase origin/main
```

4. If there are any conflicts, Git will pause the rebase process and prompt you to resolve them. After resolving conflicts, continue the rebase with:
```
git rebase --continue
```

5. push the rebased branch to remote
```
git push -f origin your-feature-branch
```

## Github workflows to automatically create a release and pure python wheel
- https://learn.scientific-python.org/development/guides/gha-pure/
- https://dev.to/ayoub3bidi/quick-tutorial-how-to-add-a-release-github-workflow-56ib

1. add the build_whl_release workflow into the folder .github/workflows/build_whl_release.yml
```
name: release with python wheel

on:
  push:
    tags:
      - "v*"

permissions:
  contents: write

jobs:
  dist:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v6
        with:
          fetch-depth: 0

      - name: Build SDist and wheel
        run: pipx run build

      # Step 5: Create a GitHub release
      - name: Create Release
        id: release
        uses: softprops/action-gh-release@v1
        with:
          files: |
            dist/*.whl

      # Step 6: Upload the wheel to the release
      - name: Upload wheel to GitHub Release
        uses: actions/upload-artifact@v5
        with:
          name: wheel
          path: dist/*.whl
```

2. Do the following command to trigger a release.
```
  git add .
  git commit -m "some messages"
  git push -u origin main
  git tag v0.0.1
  git push -u origin v0.0.1
```

## Github
So that you do not need to type your token in everytime you push, store your git credentials with this https://docs.github.com/en/get-started/getting-started-with-git/caching-your-github-credentials-in-git
```
gh auth login
```

### Github Pages with Jekyll
- https://docs.github.com/en/pages/quickstart
- create your site wiht Jekyll: https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll/creating-a-github-pages-site-with-jekyll
- https://github.com/academicpages/academicpages.github.io?tab=readme-ov-file
- theme for small biz - https://github.com/zerostaticthemes/jekyll-serif-theme

1. Install Ruby on ubuntu (https://www.ruby-lang.org/en/documentation/installation/#apt)
    ```
    sudo apt install ruby-full
    ```
2. Do not install gem as the root user. Install gems to the user account.
    ```
    echo '# Install Ruby Gems to ~/gems' >> ~/.bashrc
    echo 'export GEM_HOME="$HOME/gems"' >> ~/.bashrc
    echo 'export PATH="$HOME/gems/bin:$PATH"' >> ~/.bashrc
    source ~/.bashrc
    ```
3. Install bundler and jekyll on ubuntu (https://www.geeksforgeeks.org/how-to-install-ruby-bundler-on-linux/), (https://jekyllrb.com/docs/installation/ubuntu/).
    ```
    gem install jekyll bundler
    ```
4. Create a repository (https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll/creating-a-github-pages-site-with-jekyll#creating-a-repository-for-your-site). Set the github pages to execute from the main branch and root/

5. Git clone the repository into your local directory. Go to the directory where you want to keep the files.
    ```
    git clone https://your_directory
    ```

6. Run the following line in the directory to create a new Jekyll project
    ```
    jekyll new --skip-bundle --force .
    ```
7. Go to the gemfile and comment out the following line
    ```
    # gem "jekyll"
    ```
    - uncomment this line and replace GITHUB-PAGES-VERSION with the latest version shown here (https://pages.github.com/versions/) 
        ```
        gem "github-pages", "~> GITHUB-PAGES-VERSION", group: :jekyll_plugins
        ```
    - change the theme by changing this line to the theme you like.
        ```
        gem "minima", "~> 2.5"
        ```
8. In the terminal in the directory where gemfile is located run the following
    ```
    bundle install
    ```
9. Run the site locally by running this command.
    ```
    bundle exec jekyll serve
    ```

10. add images to the markdown
    ```
    ![image-title-here](/images/digi_tech_full.gif){:class="img-responsive"}
    ```
#### google analytics
- https://desiredpersona.com/google-analytics-jekyll/

1. Get a google analytics account at analytics.google.com
2. Go to the side bar admin -> create -> property. Key in the necessary properties.
3. You will get a google tag.
4. create a file called analytics.html in the _includes directory. Paste the following script in the file. The site.google_analytics liquid object included below will allow you to set your unique Tracking ID in Jekyll's _config.yml file.
    ```
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', '{{ site.google_analytics }}');
    </script>
    ```
5. add google measurement id to config file 
    ```
    # Google Analytics
    google_analytics: G-xxxxxxxxxx
    ```
6. Add the following code to _layouts/default.html. For other themes it might be in _includes/head.html
    ```
    {% if site.google_analytics and jekyll.environment == 'production' %}
    {% include analytics.html %}
    {% endif %}
    ```
7. Build the website and check if the tracking codes is added to the head section.

#### Adsense and github pages
- https://docs.github.com/en/site-policy/acceptable-use-policies/github-acceptable-use-policies#10-advertising-on-github
- https://jerrbearis2cool.medium.com/how-to-add-adsense-to-a-free-github-io-page-199feba98e05


#### Jekyll themes github pages
1. go to folder _data -> navigation.yml and you can make changes to the categories on the navigation bar accordingly.
2. go to the folder _pages and look for the .md or .html file to make changes.
3. at the top of the file you can see the html it is using for the formatting in the _layouts folder
4. you can change the css by going to linked css used in the _sass folder.